<html>
  <head>
    <title>Test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
    <script src="/scieloorg/_design/couchdb/js/highcharts/js/highcharts.js" type="text/javascript"></script>
    <script src="/scieloorg/_design/couchdb/js/highcharts/js/highcharts.js" type="text/javascript"></script>
    <script src="/scieloorg/_design/couchdb/js/highcharts/js/themes/gray.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/mootools/1.3.0/mootools-yui-compressed.js" type="text/javascript"></script>
    <script src="/scieloorg/_design/couchdb/js/highcharts/js/adapters/mootools-adapter.js" type="text/javascript"></script>
    <script src="/scieloorg/_design/couchdb/js/highcharts/js/highcharts.js" type="text/javascript"></script>
    <script language="javascript">
function dograph(){
    var chart;
    var chart_params = eval('(' + document.getElementById("jsongraph").firstChild.nodeValue + ')');
    
    var options = {
      chart: {
         renderTo: 'container',
         plotBackgroundColor: false,
         plotBorderWidth: false,
         plotShadow: false
      },
      title: {
         text: 'Collection Subjects'
      },
      tooltip: {
         formatter: function() {
            return '<b>'+ this.point.name +'</b>: '+Math.round((this.y/chart_params.total)*100*100)/100 +' %';
         }
      },
      plotOptions: {
         pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
               enabled: true,
               formatter: function() {
                  return '<b>'+ this.point.name +'</b>: '+Math.round((this.y/chart_params.total)*100*100)/100 +' %';
               }

            },
            showInLegend: true
         }
      },
       series: [{
         type: 'pie',
         name: 'Browser share',
         data: chart_params.data
      }]
    }

   $(document).ready(function() {
      chart = new Highcharts.Chart(options);
   });

}
    </script>
  </head>
  <body onLoad="javascript: dograph();">
      <div id="jsongraph" style="display: none;">{{rows}}</div>
      <div id="container" style="width: 100%; height: 400px"></div>
  </body>
</html>
