<html>
  <head>
    <title>Test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
    <script src="/scieloorg/_design/couchdb/js/highcharts/js/highcharts.js" type="text/javascript"></script>
    <script src="/scieloorg/_design/couchdb/js/highcharts/js/highcharts.js" type="text/javascript"></script>
    <script src="/scieloorg/_design/couchdb/js/highcharts/js/themes/gray.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/mootools/1.3.0/mootools-yui-compressed.js" type="text/javascript"></script>
    <script src="/scieloorg/_design/couchdb/js/highcharts/js/adapters/mootools-adapter.js" type="text/javascript"></script>
    <script src="/scieloorg/_design/couchdb/js/highcharts/js/highcharts.js" type="text/javascript"></script>
    <script language="javascript">
function dograph(){
    var chart;
    var chart_params = eval('(' + document.getElementById("jsongraph").firstChild.nodeValue + ')');
    var options = {
      chart: {
         renderTo: 'container',
         defaultSeriesType: 'column'
      },
      title: {
         text: 'SciELO Network Indicators'
      },
      subtitle: {
         text: 'Source: www.scielo.org'
      },
      xAxis: {
         categories: chart_params.categories
      },

    yAxis: {
        labels: {
            formatter: function() {
                return Math.pow(10,this.value);
            }
        },
         title: {
            text: 'Totals'
         }
    },
      legend: {
         layout: 'vertical',
         backgroundColor: '#FFFFFF',
         align: 'left',
         verticalAlign: 'top',
         x: 100,
         y: 70,
         floating: true,
         shadow: true
      },
    tooltip: {
        formatter: function() {
            return '<b>'+this.x+'</b><br/>'+this.series.name+':<b>'+Math.round(Math.pow(10,this.y))+'</b>';
        }
    },
      plotOptions: {
         column: {
            pointPadding: 0.2,
            borderWidth: 0
         }
      },
      series: chart_params.series
   }
   $(document).ready(function() {
      chart = new Highcharts.Chart(options);
   });

}
    </script>
  </head>
  <body onLoad="javascript: dograph();">
      <div id="jsongraph" style="display: none;">{{rows}}</div>
      <div id="container" style="width: 100%; height: 400px"></div>
  </body>
</html>
